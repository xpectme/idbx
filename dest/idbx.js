var u="onsuccess",c="onerror";function o(r){return new Promise((e,t)=>{r[u]=a=>{let n=a.target;e(n.result)},r[c]=()=>{t(r.error)}})}function l(r,e,t){let a=r.openCursor(),n=!1;a[u]=s=>{let i=s.target?.result;i&&!n?(n=e?.(i)??!1,n&&t?.()):n||(n=!0,t?.())},a[c]=()=>{throw a.error}}function B(r,e,t){return Array.isArray(e)?Promise.all(e.map(a=>o(r.add(a,t)))):o(r.add(e,t))}function R(r){return o(r.clear())}function O(r,e){return o(r.count(e))}function T(r,e){return Array.isArray(e)?Promise.all(e.map(t=>o(r.delete(t)))):o(r.delete(e))}function j(r,e){return o(r.get(e))}function _(r,e,t){return o(r.getAll(e,t))}function P(r,e,t){return o(r.getAllKeys(e,t))}function N(r,e){return o(r.getKey(e))}function U(r,e,t="readonly"){return r.transaction([e],t).objectStore(e)}function M(r){let e,t,a,n=()=>(e=new Promise((s,i)=>{t=s,a=i}),e);return l(r,s=>{let i=s.value;t(i),n&&e.then(n),s.continue()},()=>n=void 0),{async*[Symbol.asyncIterator](){for(;n;)try{yield await n()}catch(s){throw s}}}}function F(r,e={}){let t=indexedDB.open(r,e.version);return t.onupgradeneeded=a=>{if(e.upgrade){let n=a.target.result;e.upgrade(n,a)}},e.blocked&&(t.onblocked=e.blocked),new Promise((a,n)=>{t[u]=()=>a(t.result),t[c]=()=>n(t.error)})}function L(r,e,t){return Array.isArray(e)?Promise.all(e.map(a=>o(r.put(a,t)))):o(r.put(e,t))}export{B as add,o as asyncRequest,R as clear,O as count,l as cursorHandler,T as del,j as get,_ as getAll,P as getAllKeys,N as getKey,U as getStore,M as iterate,F as openDB,L as put};
//# sourceMappingURL=idbx.js.map
