function I(e,t){let r=indexedDB.open(e,t);return{upgrade:o=>{r.onupgradeneeded=o},blocked:o=>{r.onblocked=o},ready:new Promise((o,d)=>{r.onsuccess=()=>o(r.result),r.onerror=()=>d(r.error)})}}function n(e){return new Promise((t,r)=>{e.addEventListener("success",o=>{let d=o.target;t(d.result)}),e.addEventListener("error",o=>{let d=o.target;r(new Error(`IndexedDB error: ${d.error?.message}`))})})}function i(e,t,r){return n(e.add(t,r))}function x(e,t=[],r){return Promise.all(t.map(o=>i(e,o,r)))}function y(e,t,r){return n(e.put(t,r))}function q(e,t=[],r){return Promise.all(t.map(o=>y(e,o,r)))}function D(e,t){return n(e.delete(t))}function S(e,t){return Promise.all(t.map(r=>D(e,r)))}function N(e,t){return n(e.get(t))}function G(e,t){return n(e.getAll(t))}function L(e,t){return n(e.getAllKeys(t))}function z(e,t){return n(e.getKey(t))}function J(e){return n(e.clear())}function W(e,t){return n(e.count(t))}function B(e,t){let{method:r,data:o,key:d}=t;if(Array.isArray(o))for(let u of o)e[r](u,d);else e[r](o,d)}function Z(e,t,r){let o=new Set(t.map(a=>a.storeName)),d=Array.from(o),u=e.transaction(d,r),c=[];for(let a of t){let s=u.objectStore(a.storeName);switch(a.method){case"add":{B(s,a);break}case"put":{B(s,a);break}case"delete":case"del":{let{key:m}=a;if(Array.isArray(m))for(let l of m)c.push(["del",s.delete(l)]);else c.push(["del",s.delete(m)]);break}case"clear":{c.push(["clear",s.clear()]);break}case"get":{let{query:m}=a;c.push(["get",s.get(m)]);break}case"getAll":{let{query:m,count:l}=a;c.push(["getAll",s.getAll(m,l)]);break}case"getAllKeys":{let{query:m,count:l}=a;c.push(["getAllKeys",s.getAllKeys(m,l)]);break}case"getKey":{let{query:m}=a;c.push(["getKey",s.getKey(m)]);break}case"count":{let{query:m}=a;c.push(["count",s.count(m)]);break}}}return u.commit(),{abort:()=>u.abort(),completed:new Promise((a,s)=>{u.oncomplete=()=>a(c),u.onerror=()=>s(u.error)})}}export{i as add,x as addBulk,Z as batch,J as clear,W as count,D as del,S as delBulk,N as get,G as getAll,L as getAllKeys,z as getKey,I as open,y as put,q as putBulk};
//# sourceMappingURL=main.js.map
